<div class="modal-dialog" id="editlaborder">
  <div class="modal-content editordermodel">
    <div class="modal-header">
      <p class="modal-title Roboto-medium">Edit Lab Order </p>
      <span type="button" class="cross-mark" data-bs-dismiss="modal" aria-label="Close" (click)="cancel()">
        X
      </span>
    </div>
    <div class="modal-body">
      <div class="patient-block">
        <div class="row">
          <div class="col-md-4">
            <mat-label>Patient Name:</mat-label>
            <mat-form-field appearance="outline" class="col-md-12">
              <input matInput placeholder="" disabled class="notallowed-cursor" [(ngModel)]="labandImaging.PatientName">
            </mat-form-field>
          </div>
          <div class="col-md-4">
            <mat-label>Patient ID:</mat-label>
            <mat-form-field appearance="outline" class="col-md-12 ">
              <input matInput placeholder="" disabled class="notallowed-cursor" [ngModel]="labandImaging.PatientId">
            </mat-form-field>
          </div>
          <div class="col-md-4">
            <mat-label>Phone:</mat-label>
            <mat-form-field appearance="outline" class="col-md-12">
              <input matInput placeholder="" disabled class="notallowed-cursor"
                [ngModel]="labandImaging.CurrentPatient.PrimaryPhone">
            </mat-form-field>
          </div>

        </div>
        <div class="row">
          <div class="col-md-6 col-lg-6">
            <div class="row">
              <div class="col-md-6">
                <mat-label>Date of birth:</mat-label>
                <mat-form-field appearance="outline" class="col-md-12">
                  <input matInput placeholder="" disabled class="notallowed-cursor"
                    [ngModel]="labandImaging.CurrentPatient.DateofBirth | date:'MM-dd-yyyy'">
                </mat-form-field>
              </div>
              <div class="col-md-3">
                <mat-label>Sex:</mat-label>
                <mat-form-field appearance="outline" class="col-md-12">
                  <input matInput placeholder="" disabled class="notallowed-cursor"
                    [ngModel]="labandImaging.CurrentPatient.Gender">
                </mat-form-field>
              </div>
              <div class="col-md-3">
                <mat-label>Age:</mat-label>
                <mat-form-field appearance="outline" class="col-md-12">
                  <input matInput placeholder="" disabled class="notallowed-cursor"
                    [ngModel]="labandImaging.CurrentPatient.Age">
                </mat-form-field>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <mat-label>Fasting:</mat-label>
            <mat-form-field appearance="outline" class="col-md-12">
              <input matInput placeholder="">
            </mat-form-field>

          </div>
        </div>
        <div class="row">
          <div class="col-md-5">
            <mat-label>Created:</mat-label>
            <mat-form-field appearance="outline" class="col-md-12">
              <input matInput placeholder="" disabled class="notallowed-cursor"
                [ngModel]="labandImaging.CreatedDate | date:'MM-dd-yyyy'">
            </mat-form-field>

          </div>
        </div>
      </div>
      <div class="row" *ngIf="!orderIsManual">
        <mat-label>Select Order:</mat-label>
        <div class="thead">
          <div class="Helvetica-sans-serif-medium col-1 th"></div>
          <div class="Helvetica-sans-serif-medium col-1 th">#</div>
          <div class="Helvetica-sans-serif-medium col-2 th">Name</div>
          <div class="Helvetica-sans-serif-medium col-2 th">Order Status</div>
          <div class="Helvetica-sans-serif-medium col-2 th">Ordering Facility</div>
          <div class="Helvetica-sans-serif-medium col-2 th">Scheduled At</div>
          <div class="Helvetica-sans-serif-medium col-2 th">Created At</div>
        </div>
        <div class="tbody" *ngFor="let item of labOrders">
          <div class="Helvetica-sans-serif-medium col-1 td">
            <mat-radio-button></mat-radio-button>
          </div>
          <div class="Helvetica-sans-serif-medium col-1 td">{{item.OrderNumber}}</div>
          <div class="Helvetica-sans-serif-medium col-2 td">{{item.LabName}}</div>
          <div class="Helvetica-sans-serif-medium col-2 td">{{item.Status}}</div>
          <div class="Helvetica-sans-serif-medium col-2 td">{{item.OrderingFacility}}</div>
          <div class="Helvetica-sans-serif-medium col-2 td">{{item.ScheduledAt | date:"MM-dd-yyyy"}}</div>
          <div class="Helvetica-sans-serif-medium col-2 td">{{item.CreatedDate | date:"MM-dd-yyyy"}}</div>
        </div>

      </div>
      <div class="row mt-1" *ngIf="!orderIsManual">
        <div class="col-md-9">
          <div class="row">
            <div class="col-md-6">
              <mat-label>Specimen #:</mat-label>
              <mat-form-field appearance="outline" class="col-md-12">
                <input matInput placeholder="" [(ngModel)]="labandImaging.Result.Specimen">
              </mat-form-field>
            </div>
            <div class="col-md-6">
              <mat-label>Specimen Type:</mat-label>
              <mat-form-field appearance="outline" class="col-md-12">
                <input matInput placeholder="" [(ngModel)]="labandImaging.Result.SpecimenType">
              </mat-form-field>
            </div>
          </div>
        </div>

        <div class="col-md-3">
          <mat-label>Test Report Date:</mat-label>
          <mat-form-field appearance="outline" class="calendaricon green-calendar col-md-12">
            <input matInput [matDatepicker]="testReportedDate" placeholder="Specimen Collected Date"
              (focus)="testReportedDate?.open()" class="Helvetica-sans-serif-medium"
              [(ngModel)]="labandImaging.Result.TestReportedDate">
            <mat-datepicker-toggle matSuffix [for]="testReportedDate">
            </mat-datepicker-toggle>
            <mat-datepicker #testReportedDate></mat-datepicker>
          </mat-form-field>
        </div>
      </div>
      <div class="row" *ngIf="!orderIsManual">
        <div class="col-md-9">
          <div class="row">
            <div class="col-md-7">
              <mat-label>Ordering Physician:*</mat-label>
              <mat-form-field appearance="outline" class="col-md-12">
                <mat-select required placeholder="" [(ngModel)]="labandImaging.OrderingPhyscianId">
                  <mat-option value='' selected>View All Providers</mat-option>
                  <mat-option *ngFor="let provider of practiceProviders" [value]="provider.ProviderId">
                    {{provider.FullName}}</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="col-md-5">
              <mat-label>NPI:</mat-label>
              <mat-form-field appearance="outline" class="col-md-12">
                <input matInput placeholder="" disabled class="notallowed-cursor"
                  [(ngModel)]="labandImaging.Result.NPI">
              </mat-form-field>
            </div>
          </div>
        </div>

        <div class="col-md-3">
          <mat-label>Lab Order #:</mat-label>
          <mat-form-field appearance="outline" class="col-md-12">
            <input matInput placeholder="" disabled class="notallowed-cursor" [(ngModel)]="labandImaging.OrderNumber">
          </mat-form-field>
        </div>
      </div>
      <div class="row highlight-blocks" *ngIf="!orderIsManual">
        <div class="col-lg-7 col-md-7 left-block">

          <div class="row highlight-block">
            <div class="col-lg-12">
              <div class="row">
                <div class="col-lg-12">
                  <p class="title">Ordering Facility Name:</p>
                  <div class="row">
                    <div class="col-lg-12">
                      <mat-form-field appearance="outline" class="col-md-12">
                        <input matInput placeholder="" [(ngModel)]="labandImaging.Result.OrderName">
                      </mat-form-field>
                    </div>
                  </div>
                </div>
              </div>
              <div class=" row">
                <div class="col-lg-12 row-content">
                  <p class="title">Ordering Facility Address:</p>
                  <div class="row">
                    <div class="col-lg-12">
                      <mat-form-field appearance="outline" class="col-md-12">
                        <input matInput placeholder="" [(ngModel)]="labandImaging.Result.OrderAddress">
                      </mat-form-field>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row highlight-block">
            <div class="col-lg-12">
              <div class="row">
                <div class="col-lg-12">
                  <p class="title">Performing Facility Name:</p>
                  <div class="row">
                    <div class="col-lg-12">
                      <mat-form-field appearance="outline" class="col-md-12">
                        <input matInput placeholder="" [(ngModel)]="labandImaging.Result.PerformingName">
                      </mat-form-field>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-lg-12 row-content">
                  <p class="title">Performing Facility Address:</p>
                  <div class="row">
                    <div class="col-lg-12">
                      <mat-form-field appearance="outline" class="col-md-12">
                        <input matInput placeholder="" [(ngModel)]="labandImaging.Result.PerformingAddress">
                      </mat-form-field>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-5 col-md-5 right-block">
          <div class="row highlight-block">
            <p class="title">Specimen Collected:</p>
            <div class="col-md-7">
              <mat-form-field appearance="outline" class="calendaricon green-calendar col-md-12">
                <input matInput [matDatepicker]="specimenCollected" placeholder="Specimen Collected Date"
                  (focus)="specimenCollected?.open()" class="Helvetica-sans-serif-medium"
                  [(ngModel)]="labandImaging.Result.CollectedDate">
                <mat-datepicker-toggle matSuffix [for]="specimenCollected">
                </mat-datepicker-toggle>
                <mat-datepicker #specimenCollected></mat-datepicker>
              </mat-form-field>
            </div>
            <div class="col-md-5">
              <div class="input-group input-group-green input-group-time">
                <mat-form-field appearance="outline" class="col-lg-12 col-md-12 col-12">
                  <input matInput type="text" hint="12 hours format" appTimeMask
                    [(ngModel)]="labandImaging.Result.CollectedTime">
                </mat-form-field>
              </div>
            </div>
          </div>
          <div class="row highlight-block">
            <p class="title">Specimen Received:</p>
            <div class="col-md-7">
              <mat-form-field appearance="outline" class="calendaricon green-calendar col-md-12">
                <input matInput [matDatepicker]="specimenReceived" placeholder="Specimen Received Date"
                  (focus)="specimenReceived?.open()" class="Helvetica-sans-serif-medium"
                  [(ngModel)]="labandImaging.Result.ReceivedDate">
                <mat-datepicker-toggle matSuffix [for]="specimenReceived">
                </mat-datepicker-toggle>
                <mat-datepicker #specimenReceived></mat-datepicker>
              </mat-form-field>
            </div>
            <div class="col-md-5">
              <div class="input-group input-group-green input-group-time">
                <mat-form-field appearance="outline" class="col-lg-12 col-md-12 col-12">
                  <input matInput type="text" hint="12 hours format" appTimeMask
                    [(ngModel)]="labandImaging.Result.ReceivedTime">
                </mat-form-field>
              </div>
            </div>
          </div>
          <div class="row highlight-block">
            <p class="title">Test Performed:</p>
            <div class="col-md-7">
              <mat-form-field appearance="outline" class="calendaricon green-calendar col-md-12">
                <input matInput [matDatepicker]="testPerfomred" placeholder="Test Performed Date"
                  (focus)="testPerfomred?.open()" class="Helvetica-sans-serif-medium"
                  [(ngModel)]="labandImaging.Result.TestedDate">
                <mat-datepicker-toggle matSuffix [for]="testPerfomred">
                </mat-datepicker-toggle>
                <mat-datepicker #testPerfomred></mat-datepicker>
              </mat-form-field>
            </div>
            <div class="col-md-5">
              <div class="input-group input-group-green input-group-time">
                <mat-form-field appearance="outline" class="col-lg-12 col-md-12 col-12">
                  <input matInput type="text" hint="12 hours format" appTimeMask
                    [(ngModel)]="labandImaging.Result.TestedTime">
                </mat-form-field>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row" *ngIf="!orderIsManual">
        <div class="col-lg-12">
          <div class="form-group">
            <div class="panel panel-tests">
              <div class="panel-heading">
                <div class="title">Tests Ordered (mimimum one test order is required)</div>
                <div class="title-right">
                  <button class="plusicon" type="button" aria-expanded="false" (click)="addTestOrder()">
                    <i class="fa fa-plus"></i>
                  </button>
                </div>
              </div>
              <div class="row header-row">
                <div class="col-md-2 Helvetica-sans-serif-medium">
                  Code
                </div>
                <div class="col Helvetica-sans-serif-medium">
                  Test
                </div>
                <div class="col-md-2 Helvetica-sans-serif-medium">
                  Result
                </div>
                <div class="col-md-1 Helvetica-sans-serif-medium">
                  Units
                </div>
                <div class="col-md-1 Helvetica-sans-serif-medium">
                  Flag
                </div>
                <div class="col-md-2 Helvetica-sans-serif-medium">
                  Range
                </div>
                <div class="col-md-1 Helvetica-sans-serif-medium">
                  Destroy
                </div>
              </div>
              <div class="row">
                <form [formGroup]="formGroups" style="clear: both;">
                  <div formArrayName="testOrders" class="row">
                    <div *ngFor="let atta of testOrders.controls; let i=index ">
                      <div [formGroupName]="i">
                        <div class="row  data-row">
                          <div class="col-md-2 Helvetica-sans-serif-medium">
                            <!-- <mat-form-field appearance="outline" class="col-md-12" > -->
                            <input matInput placeholder="" [data-index]="i" matTooltip="Enter minimum three digist"
                              formControlName="Code" (blur)="getCodeInfo($event,i)" />
                            <!-- </mat-form-field> -->
                          </div>
                          <div class="col Helvetica-sans-serif-medium">
                            <!-- <mat-form-field appearance="outline" class="col-md-12"> -->
                            <input matInput placeholder="" formControlName="Test"
                              [matTooltip]="atta.controls.Test.value " readonly class="not-allowed col-md-12"
                              style="width:100%" />
                            <!-- </mat-form-field> -->
                          </div>
                          <div class="col-md-2 Helvetica-sans-serif-medium">
                            <!-- <mat-form-field appearance="outline" class="col-md-12"> -->
                            <input matInput placeholder="" formControlName="Result"
                              [matTooltip]="atta.controls.Result.value " class="not-allowed" />
                            <!-- </mat-form-field> -->
                          </div>
                          <div class="col-md-1 Helvetica-sans-serif-medium">
                            <!-- <mat-form-field appearance="outline" class="col-md-12"> -->
                            <input matInput placeholder="" formControlName="Units"
                              [matTooltip]="atta.controls.Units.value " class="not-allowed" />
                            <!-- </mat-form-field> -->
                          </div>
                          <div class="col-md-1 Helvetica-sans-serif-medium">
                            <!-- <mat-form-field appearance="outline" class="col-md-12"> -->
                            <input matInput placeholder="" formControlName="Flag"
                              [matTooltip]="atta.controls.Flag.value " class="not-allowed" />
                            <!-- </mat-form-field> -->
                          </div>
                          <div class="col-md-2 Helvetica-sans-serif-medium">
                            <!-- <mat-form-field appearance="outline" class="col-md-12"> -->
                            <input matInput placeholder="" formControlName="Range"
                              [matTooltip]="atta.controls.Range.value " class="not-allowed" />
                            <!-- </mat-form-field> -->
                          </div>
                          <div class="col-md-1 Helvetica-sans-serif-medium" style="display:inherit">
                            <button class="minuicon" type="button" aria-expanded="false" (click)="removeLabOrder(i)">
                              <i class="fa fa-minus"></i>
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </form>
              </div>
              <div class="row">
                <div class="col-12 table">
                  <table class="table">
                    <!-- <thead class="text-nowrap tblheaderclass">
                        <tr class="bg-color">
                          <th class="Helvetica-sans-serif-medium">
                            Code
                          </th>
                          <th class="Helvetica-sans-serif-medium">
                            Test
                          </th>
                          <th class="Helvetica-sans-serif-medium">
                            Result
                          </th>
                          <th class="Helvetica-sans-serif-medium">
                            Units
                          </th>
                          <th class="Helvetica-sans-serif-medium">
                            Flag
                          </th>
                          <th class="Helvetica-sans-serif-medium">
                            Range
                          </th>
                          <th class="Helvetica-sans-serif-medium">
                            Delete
                          </th>
                        </tr>
                      </thead> -->
                    <tbody>
                      <!-- <ng-container formArrayName="testorder" *ngFor="let group of testorder.controls; let i = index">
                          <tr [formGroupName]="i">
                            <td>
                              <input type="text" class="form-control input-border" [formControlName]="'code'" />
                            </td>
                            <td>
                              <input type="text" class="form-control input-border" [formControlName]="'test'" />
                            </td>
                            <td>
                              <input type="text" class="form-control input-border" [formControlName]="'result'" />
                            </td>
                            <td>
                              <input type="text" class="form-control input-border" [formControlName]="'units'" />
                            </td>
                            <td>
                              <input type="text" class="form-control input-border" [formControlName]="'flag'" />
                            </td>
                            <td>
                              <input type="text" class="form-control input-border" [formControlName]="'range'" />
                            </td>
                            <td>

                            </td>
                          </tr>
                        </ng-container> -->
                    </tbody>
                  </table>
                </div>
              </div>


            </div>
          </div>
        </div>
      </div>
      <div class="row" *ngIf="!orderIsManual">
      </div>
      <div class="row mt-1" *ngIf="!orderIsManual">
        <div class="col-md-12">
          <mat-label>Notes:</mat-label>
          <textarea matInput class="text-border" placeholder="" readonly disabled></textarea>
        </div>
      </div>

    </div>
    <div class="modal-footer">
      <div class="chk-reviewed" style="float:left">
        <mat-checkbox disabled="true">
        </mat-checkbox>
        <span class="mt-3">Reviewed</span>
      </div>
      <div class="buttons" style="float:right">
        <button mat-raised-button type="submit" class="btn btn-green   pull-right">Print</button>
        <button mat-raised-button type="submit" class="btn btn-green   pull-right">Sign</button>
        <button mat-raised-button type="submit" class="btn btn-green   pull-right">Save</button>
      </div>
    </div>
  </div>
</div>
